---
phase: 01-foundation-core-loop
plan: 01
type: execute
---

<objective>
Set up project foundation with Phaser 3 game framework and Rot.js roguelike toolkit, establishing the basic rendering pipeline.

Purpose: Create the technical foundation that all future game systems will build upon. Proper setup now prevents technical debt later.
Output: Working web-based game project with Phaser 3 rendering a canvas, hot module reloading via Vite, and dependencies installed.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-core-loop/01-RESEARCH.md

**Tech stack from research:**
- Phaser 3 (v3.90.0+) - HTML5 game framework
- Rot.js (v0.5.0+) - Roguelike toolkit
- TypeScript (v5.x) - Type safety
- Vite (v5.x+) - Build tooling and dev server

**Research guidance:**
- Use Phaser's Scene system for game organization
- Separate game logic from rendering (avoid storing state in Phaser objects)
- Start simple, avoid over-engineering early
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize project with Vite, TypeScript, and dependencies</name>
  <files>package.json, tsconfig.json, vite.config.ts, index.html, src/main.ts</files>
  <action>
    Create new project structure:
    1. Run `npm init -y` to create package.json
    2. Install dependencies: `npm install phaser rot-js`
    3. Install dev dependencies: `npm install -D typescript vite @types/node`
    4. Create tsconfig.json with ES2020 target, module: "ESNext", moduleResolution: "bundler", strict: true, esModuleInterop: true
    5. Create vite.config.ts that sets root to current directory and build output to dist/
    6. Create index.html with minimal structure: DOCTYPE, head with meta charset/viewport, body with div#game, script src="/src/main.ts" type="module"
    7. Create src/main.ts as empty entry point (will add Phaser config in next task)
    8. Add npm scripts to package.json: "dev": "vite", "build": "vite build", "preview": "vite preview"

    IMPORTANT: Use Vite (not Webpack) as research indicates it's faster and simpler for game projects. Use TypeScript for type safety as recommended in research.
  </action>
  <verify>npm install completes without errors, tsconfig.json validates, vite.config.ts is valid TypeScript</verify>
  <done>Project structure created with all config files, dependencies installed in node_modules/, npm scripts defined</done>
</task>

<task type="auto">
  <name>Task 2: Create Phaser game configuration and basic GameScene</name>
  <files>src/main.ts, src/scenes/GameScene.ts</files>
  <action>
    Create basic Phaser 3 game setup following research patterns:

    In src/scenes/GameScene.ts:
    - Create GameScene class extending Phaser.Scene
    - Constructor calls super with key: 'GameScene'
    - preload() method: empty for now (no assets yet)
    - create() method: add simple text "Metric - Loading..." at center of screen using this.add.text()
    - update() method: empty for now

    In src/main.ts:
    - Import Phaser and GameScene
    - Create Phaser.Types.Core.GameConfig with:
      - type: Phaser.AUTO (uses WebGL with Canvas fallback)
      - width: 800, height: 600 (standard roguelike viewport)
      - parent: 'game' (matches div#game in index.html)
      - backgroundColor: '#000000' (black background, typical for roguelikes)
      - scene: [GameScene]
      - pixelArt: true (crisp pixels for tile-based graphics)
    - Instantiate new Phaser.Game(config)

    AVOID: Don't create multiple scenes yet, don't add complex state management. Start simple as per research anti-patterns.
  </action>
  <verify>TypeScript compiles without errors (npm run build succeeds), main.ts imports work correctly</verify>
  <done>Phaser game config created, GameScene defined with basic structure, no TypeScript errors</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Phaser 3 game running in browser with basic rendering</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open browser to the URL shown (typically http://localhost:5173)
    3. Confirm: Black canvas appears (800x600)
    4. Confirm: Text "Metric - Loading..." displays in center of screen
    5. Confirm: Browser console shows no errors
    6. Confirm: Hot module reload works (edit text in GameScene.ts, save, see update without refresh)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run dev starts development server without errors
- [ ] Browser displays Phaser canvas with text
- [ ] No console errors in browser
- [ ] TypeScript compilation works (npm run build succeeds)
- [ ] Hot module reloading functions correctly
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Phaser 3 game renders successfully in browser
- Development environment ready for next plan (grid system)
- No errors in console or terminal

</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-core-loop/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Project Setup & Basic Rendering Summary

**Phaser 3 game project initialized with TypeScript and Vite build tooling**

## Accomplishments

- Project structure created with Vite + TypeScript + Phaser 3 + Rot.js
- Basic GameScene rendering text to canvas
- Development server with hot module reloading functional
- Foundation ready for grid system and game logic

## Files Created/Modified

- `package.json` - Dependencies and npm scripts
- `tsconfig.json` - TypeScript configuration
- `vite.config.ts` - Vite build configuration
- `index.html` - Entry HTML with game container
- `src/main.ts` - Phaser game initialization
- `src/scenes/GameScene.ts` - Main game scene

## Decisions Made

- Chose Vite over Webpack for faster development (per research recommendation)
- Used TypeScript for type safety in larger project
- Set canvas to 800x600 as standard roguelike viewport size
- Enabled pixelArt rendering for crisp tile graphics

## Issues Encountered

[Document any issues, or state "None"]

## Next Step

Ready for 01-02-PLAN.md - Grid System & Map Rendering

</output>
